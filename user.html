<script>
    // Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyD0Biwjk-PfEGAsm_FUwavuo_6-FpfQw8I",
        authDomain: "vacation-calendar-ad463.firebaseapp.com",
        databaseURL: "https://vacation-calendar-ad463-default-rtdb.firebaseio.com",
        projectId: "vacation-calendar-ad463",
        storageBucket: "vacation-calendar-ad463.firebasestorage.app",
        messagingSenderId: "318751055172",
        appId: "1:318751055172:web:b511b2a74e7b804f56cb11"
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Department Colors
    const departmentColors = {
        technical: 'blue',
        analytics: 'blue',
        vip: 'red',
        other: 'orange'
    };

    // Generate Calendar
    generateCalendar(2025);

    // Highlight Taken Dates
    async function highlightTakenDates() {
        try {
            const ref = database.ref('vacations');
            const snapshot = await ref.get();
            const vacationData = snapshot.val() || {};

            Object.entries(vacationData).forEach(([employee, dates]) => {
                const department = employee.split('|')[1]; // Extract department
                const color = departmentColors[department] || 'gray'; // Default to gray

                dates.forEach((date) => {
                    const dayCell = document.querySelector(`.day-cell[data-date="${date}"]`);
                    if (dayCell) {
                        dayCell.style.backgroundColor = color;
                        dayCell.setAttribute('data-department', department); // Add department attribute
                    }
                });
            });

            console.log('Vacation dates highlighted successfully.');
        } catch (error) {
            console.error('Error fetching vacation data:', error);
        }
    }

    highlightTakenDates();
</script>
